(()=>{"use strict";const t=[{title:"test 1",description:"A desription for my default Todo",weekly:!0,favourite:!1},{title:"test 2",description:"A desription for my default Todo",weekly:!1,favourite:!0},{title:"test 3",description:"A desription for my default Todo",weekly:!1,favourite:!1}];let e="home";const n=t=>{const e=document.getElementById("modal"),n=document.getElementById("modal-backdrop");t?(e.style.display="flex",n.style.display="block"):(e.style.display="none",n.style.display="none")},o=t=>{const e=modal.style.display;"none"!==e&&e&&t?n():n(!0)},d=t=>{let n;return n="weekly"===e?t.filter((t=>t.weekly)):"favourites"===e?t.filter((t=>t.favourite)):t,n},l=(t,n=!1)=>{const o=document.getElementById("displayed-todos-container");let d="";t.forEach(((t,e)=>{d+=`\n        <div class="todo-card">\n        <div class="todo-card-top-bar">\n            <p style="margin: 0;">${t.title}</p>\n            <div>\n                <button id="favourite-button-todo-${e}" class="default-button favourite-button" type="button">\n                    <span id="${t.title}" class="material-icons">star</span>\n                </button>\n                <button id="close-button-todo-${e}" class="default-button close-button close-button-todo" type="button">\n                    <span id="${t.title}" class="material-icons">close</span>\n                </button>\n            </div>\n        </div>\n        <p>${t.description}</p>\n        </div>\n        `})),o.innerHTML=`\n    <h3>${n?"Home":e.toUpperCase()}</h3>\n    <div class="todo-card-container">\n        ${d}\n    </div>\n    `;const l=document.querySelectorAll(".favourite-button"),c=document.querySelectorAll(".close-button-todo");l.forEach((t=>{t.addEventListener("click",(t=>{i(t.target.id)}))})),c.forEach((t=>{t.addEventListener("click",(t=>{a(t.target.id)}))}))},i=e=>{const n=t.findIndex((t=>t.title===e));t[n]?.favourite?alert("This todo has already been favourited"):(t[n].favourite=!0,alert(`${t[n].title} added to favourites`))},a=e=>{console.log("called");const n=t.findIndex((t=>t.title===e));t.splice(n,1),l(d(t)),document.getElementById("todo-count").innerHTML=`Todo count: ${t.length}`},c=document.getElementById("close-button"),s=document.getElementById("create-button"),r=document.getElementById("create-todo-form"),u=document.getElementById("search-bar"),m=document.querySelectorAll(".page-buttons");document.addEventListener("DOMContentLoaded",(()=>{(()=>{const t=new Date;document.getElementById("date-input").min=t.toISOString().split("T")[0]})(),l(t,!0),document.getElementById("todo-count").innerHTML=`Todo count: ${t.length}`})),m.forEach((n=>{n.addEventListener("click",(()=>{u.value="",(n=>{const o=n.id.split("-button")[0];e=o,l(d(t))})(n)}))})),s.addEventListener("click",(()=>{o()})),c.addEventListener("click",(()=>{o(!0)})),r.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=(()=>{const e=document.getElementById("modal-title").value;if(!t.map((t=>t.title)).includes(e)){const t={title:document.getElementById("modal-title").value,description:document.getElementById("modal-textarea").value,date:new Date(document.getElementById("date-input").value)};return document.getElementById("create-todo-form").reset(),t}alert("already created")})();if(e){const n=new Date,d=(e.date.getTime()-n.getTime())/864e5;t.push({...e,weekly:d<7,favourite:!1}),l(t),o(!0),document.getElementById("todo-count").innerHTML=`Todo count: ${t.length}`}})()})),u.addEventListener("input",(e=>{const{value:n}=e.target;(e=>{const n=t.filter((t=>t.title.includes(e)));l(d(n))})(n)}))})();