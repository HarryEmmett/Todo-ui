(()=>{"use strict";const e=[{title:"test 1",description:"A desription for my default Todo",weekly:!0,favourite:!1},{title:"test 2",description:"A desription for my default Todo",weekly:!1,favourite:!0},{title:"test 3",description:"A desription for my default Todo",weekly:!1,favourite:!1}];let t="home";const n=e=>{const t=document.getElementById("modal"),n=document.getElementById("modal-backdrop");e?(t.style.display="flex",n.style.display="block"):(t.style.display="none",n.style.display="none")},o=e=>{const t=modal.style.display;"none"!==t&&t&&e?n():n(!0)},d=e=>{let n;return n="weekly"===t?e.filter((e=>e.weekly)):"favourites"===t?e.filter((e=>e.favourite)):e,n},l=(n,o)=>{const a=document.getElementById("displayed-todos-container");a.innerHTML="";const c=document.createElement("h3");c.innerText=o.toUpperCase(),a.appendChild(c);const i=document.createElement("div");i.className="todo-card-container",n.forEach(((e,t)=>{i.appendChild(((e,t,n)=>{const o=document.createElement("div");o.className="todo-card";const d=document.createElement("div");d.className="todo-card-top-bar";const l=document.createElement("p");l.style="margin: 0;",l.innerText=t,d.appendChild(l);const a=document.createElement("div"),c=document.createElement("button");c.id=`favourite-button-todo-${n}`,c.className="default-button favourite-button",c.type="button";const i=document.createElement("span");i.id=t,i.className="material-icons",i.innerText="star",c.appendChild(i),a.appendChild(c);const r=document.createElement("button");r.id=`favourite-button-todo-${n}`,r.className="default-button close-button close-button-todo",r.type="button";const s=document.createElement("span");s.id=t,s.className="material-icons",s.innerText="close",r.appendChild(s),a.appendChild(r),d.appendChild(a);const u=document.createElement("p");return u.innerText=e,o.appendChild(d),o.appendChild(u),o})(e.description,e.title,t))})),a.appendChild(i);const r=document.querySelectorAll(".favourite-button"),s=document.querySelectorAll(".close-button-todo");r.forEach((t=>{t.addEventListener("click",(t=>{(t=>{const n=e.findIndex((e=>e.title===t));e[n]?.favourite?alert("This todo has already been favourited"):(e[n].favourite=!0,alert(`${e[n].title} added to favourites`))})(t.target.id)}))})),s.forEach((n=>{n.addEventListener("click",(n=>{(n=>{const o=e.findIndex((e=>e.title===n));e.splice(o,1),l(d(e),t),document.getElementById("todo-count").innerText=`Todo count: ${e.length}`})(n.target.id)}))}))};document.addEventListener("DOMContentLoaded",(()=>{(()=>{const e=new Date;document.getElementById("date-input").min=e.toISOString().split("T")[0]})(),l(e,"home"),document.getElementById("todo-count").innerHTML=`Todo count: ${e.length}`;const n=document.getElementById("close-button"),a=document.getElementById("create-button"),c=document.getElementById("create-todo-form"),i=document.getElementById("search-bar");document.querySelectorAll(".page-buttons").forEach((n=>{n.addEventListener("click",(()=>{i.value="",(n=>{const o=n.id.split("-button")[0];t=o,l(d(e),t)})(n)}))})),a.addEventListener("click",(()=>{o()})),n.addEventListener("click",(()=>{o(!0)})),c.addEventListener("submit",(n=>{n.preventDefault(),(()=>{const n=(()=>{const t=document.getElementById("modal-title").value;if(!e.map((e=>e.title)).includes(t)){const e={title:document.getElementById("modal-title").value,description:document.getElementById("modal-textarea").value,date:new Date(document.getElementById("date-input").value)};return document.getElementById("create-todo-form").reset(),e}alert("already created")})();if(n){const d=new Date,a=(n.date.getTime()-d.getTime())/864e5;e.push({...n,weekly:a<7,favourite:!1}),l(e,t),o(!0),document.getElementById("todo-count").innerText=`Todo count: ${e.length}`}})()})),i.addEventListener("input",(n=>{const{value:o}=n.target;(n=>{const o=e.filter((e=>e.title.includes(n)));l(d(o),t)})(o)}))}))})();